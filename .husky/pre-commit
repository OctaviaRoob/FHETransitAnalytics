#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Run lint-staged
npx lint-staged

# Run Solidity linter
echo "ğŸ“ Linting Solidity contracts..."
npm run lint:sol || {
  echo "âŒ Solidity linting failed. Please fix the issues and try again."
  exit 1
}

# Run TypeScript type check
echo "ğŸ” Checking TypeScript types..."
npm run type-check || {
  echo "âŒ TypeScript type check failed. Please fix the issues and try again."
  exit 1
}

# Run tests
echo "ğŸ§ª Running tests..."
npm test || {
  echo "âš ï¸  Tests failed. Please fix failing tests before committing."
  exit 1
}

echo "âœ… Pre-commit checks passed!"
